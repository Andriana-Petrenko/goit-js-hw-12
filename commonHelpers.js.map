{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.png","../src/refs.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFpSURBVHgBrZQ9UsMwEIXXQoZhcgCobU6RNKlygPTOKUhPDz00UOBbpE9OgX0FD8xQkBAbrYkyirQrK3Fe5bHX79Nqf6JqPG6AUJzN4DLLIETr/B02eU5+kz7z39UK6uIDfBLpnYqdtc8URLLmiwX8PD1CkO7nLET2NlfSsRRE9jXvgshzmPsg0mcu0lQVufCa2jE2ROhuccyTFK6fX1R2fKvi4TBGJImTCXoiROALqhXrsmhTxCAKojPfqBmoy9L9f+dJzoEWDpCZri6cab5mBkzLC6AgAFGweRCAgoSaowQEqmGeuxSUgXnn/1fE756jAVxBQyHyFHOuu1gADpUtfOfrFhOyXS6dWcA1joq+X9+a+IyrAnWl1recTNrDXcy/Ph8iVbh4OgVxcwtbNeJaTVVBl+wY0xwzl2a6eiWculFtc9S+yH0hlPkBoA+EM3cADmQwaLeqT9gtcjhku42cgwPIaARd8u2mP6EkDQvp61kkAAAAAElFTkSuQmCC\"","export const refs = {\n    form: document.querySelector('form'),\n    list: document.querySelector('.gallery'),\n    spanLoader: document.querySelector('.loader'),\n    loadButton: document.querySelector('.load-button'),\n    input: document.querySelector('.form-input')\n}","// ----library Axios----\nimport axios from \"axios\";\n\n// ----library iziToast----\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport closeIcon from './img/bi_x-octagon.png';\n\n// ----library simpleLigthbox----\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport {refs} from './refs';\n\nlet page = 1;\nlet inputSearch = '';\nlet perPage = 15;\n\n// ----Add an event handler for the \"Search\" button----\nrefs.form.addEventListener('submit', onSearchButton);\n\n// ----Add an event handler for the \"Load more\" button----\nrefs.loadButton.addEventListener('click', onLoadMoreButton)\n\n// ----Request function----\nasync function getPhotos() {\n    refs.spanLoader.classList.remove('hidden');\n    const response = await axios.get( 'https://pixabay.com/api/',{\n        params: {\n            key: \"42112521-3ff4dfc201bab0977369cd2bc\",\n            q: `${inputSearch}`,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            per_page: perPage,\n            page: page},\n    });\n    const {hits, totalHits } = response.data;\n    refs.spanLoader.classList.add('hidden');\n    return {hits, totalHits};\n}\n\n// ----Event Searching photos----\nasync function onSearchButton(e){\n    e.preventDefault();\n    inputSearch = refs.input.value.trim();\n    refs.list.innerHTML = '';\n    refs.loadButton.classList.add('hidden');\n    if (inputSearch === '') {\n        return iziToast.error({\n            messageColor: '#FFF',\n            color: '#EF4040',\n            iconUrl: closeIcon,\n            position: 'topRight',\n            message: 'Please,enter what do you want to find!',\n        });\n    };\n    page = 1;\n    try {\n        const { hits, totalHits } = await getPhotos();\n        noPhotos(hits);\n        renderPhoto(hits);\n        addLoadButton(totalHits);\n    }\n    catch (error) {\n        iziToast.error({\n            messageColor: '#FFF',\n            color: '#EF4040',\n            iconUrl: closeIcon,\n            position: 'topRight',\n            message: `${error}`,\n        })\n    } \n    simpleLightbox();\n    refs.form.reset(); \n}\n\n// ----Event Loading photos----\n async function onLoadMoreButton() {  \n    page++;\n    try {\n        const {hits, totalHits} = await getPhotos();\n        renderPhoto(hits);\n        endOfCollection(page, totalHits);\n    }\n    catch (error) {\n        console.log(error);\n        iziToast.error({\n                messageColor: '#FFF',\n                color: '#EF4040',\n                iconUrl: closeIcon,\n                position: 'topRight',\n                message: `${error}`,\n            })\n     };\n    smoothScroll();\n    simpleLightbox();\n}\n\n// ----Markup HTML----\nfunction renderPhoto(hits) {\n    const markup = hits\n        .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) =>\n            `<li class='gallery-item'>\n             <a class='gallery-link' href='${largeImageURL}'>\n               <img class='gallery-image' src='${webformatURL}' alt='${tags}'/>\n             </a>\n             <div class='container-app'>\n              <p><span>Likes</span> ${likes}</p>\n              <p><span>Views</span> ${views}</p>\n              <p><span>Comments</span> ${comments}</p>\n              <p><span>Downloads</span> ${downloads}</p>\n             </div>\n            </li>`)\n        .join('');\n    refs.list.insertAdjacentHTML('beforeend', markup);\n}\n\n// ----SmoothScroll----\nfunction smoothScroll() {\n    const { height: itemHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n    window.scrollBy({\n    top: itemHeight*2,\n    behavior: 'smooth',\n  });\n}\n\n// ----No request photos---- \nfunction noPhotos(hits){\n    if (hits.length === 0) {\n        iziToast.error({\n            messageColor: '#FFF',\n            color: '#EF4040',\n            iconUrl: closeIcon,\n            position: 'topRight',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        }; \n}\n\n// ---- Add 'Load more' button-----\nfunction addLoadButton(totalHits) {\n   const totalPages = Math.ceil(totalHits / perPage);     \n    if (totalPages>1) {\n       refs.loadButton.classList.remove('hidden'); \n    };\n     \n}\n\n// ---- The end of the collection----\nfunction endOfCollection(page, totalHits) {\n    const totalPages = Math.ceil(totalHits / perPage);\n    if (page>=totalPages) {\n        observer.observe(refs.list.lastChild);\n        refs.loadButton.classList.add('hidden'); \n    } else {\n        observer.unobserve(refs.list.lastChild);\n    } \n}\n\n// ---- Add observer----\nconst observer = new IntersectionObserver(onLastPage);\nfunction onLastPage(entries,observer) {\n    entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n            iziToast.error({\n                position: \"topRight\",\n                messageColor: '#FFF',\n                color: '#EF4040',\n                iconUrl: closeIcon,\n                message: \"We're sorry, but you've reached the end of search results\"\n            });\n        }\n    });\n   \n}\n\n\n// ----Library SimpleLightbox----\nfunction simpleLightbox(){\n    let gallery = new SimpleLightbox('.gallery a',{\n    captionsData: 'alt',\n    captionsPosition: 'bottom',\n    captionDelay: 250,\n});\n    gallery.on('show.simpleLightbox');\n    gallery.refresh();\n}\n\n"],"names":["closeIcon","refs","page","inputSearch","perPage","onSearchButton","onLoadMoreButton","getPhotos","response","axios","hits","totalHits","iziToast","noPhotos","renderPhoto","addLoadButton","error","simpleLightbox","endOfCollection","smoothScroll","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","itemHeight","totalPages","observer","onLastPage","entries","entry","gallery","SimpleLightbox"],"mappings":"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"}