{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.png","../src/refs.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFpSURBVHgBrZQ9UsMwEIXXQoZhcgCobU6RNKlygPTOKUhPDz00UOBbpE9OgX0FD8xQkBAbrYkyirQrK3Fe5bHX79Nqf6JqPG6AUJzN4DLLIETr/B02eU5+kz7z39UK6uIDfBLpnYqdtc8URLLmiwX8PD1CkO7nLET2NlfSsRRE9jXvgshzmPsg0mcu0lQVufCa2jE2ROhuccyTFK6fX1R2fKvi4TBGJImTCXoiROALqhXrsmhTxCAKojPfqBmoy9L9f+dJzoEWDpCZri6cab5mBkzLC6AgAFGweRCAgoSaowQEqmGeuxSUgXnn/1fE756jAVxBQyHyFHOuu1gADpUtfOfrFhOyXS6dWcA1joq+X9+a+IyrAnWl1recTNrDXcy/Ph8iVbh4OgVxcwtbNeJaTVVBl+wY0xwzl2a6eiWculFtc9S+yH0hlPkBoA+EM3cADmQwaLeqT9gtcjhku42cgwPIaARd8u2mP6EkDQvp61kkAAAAAElFTkSuQmCC\"","export const refs = {\n    form: document.querySelector('form'),\n    list: document.querySelector('.gallery'),\n    spanLoader: document.querySelector('.loader'),\n    loadButton: document.querySelector('.load-button'),\n    input: document.querySelector('.form-input')\n}","// ----library Axios----\nimport axios from \"axios\";\n\n// ----library iziToast----\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport closeIcon from './img/bi_x-octagon.png';\n\n// ----library simpleLigthbox----\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport {refs} from './refs';\n\n// Controls the group number\nlet page = 1;\nlet inputSearch = '';\nlet perPage = 15;\n\nrefs.form.addEventListener('submit', onSearchButton);\n// ----Event Searching photos----\nasync function onSearchButton(e){\n    e.preventDefault();\n    inputSearch = refs.input.value.trim();\n    refs.list.innerHTML = '';\n    refs.loadButton.classList.add('hidden');\n    if (inputSearch === '') {\n       return iziToast.error({\n        messageColor: '#FFF',\n        color: '#EF4040',\n        iconUrl: closeIcon,\n        position: 'topRight',\n        message: 'Please,enter what do you want to find!',\n        });\n    };\n    page = 1;\n    try {\n        const { hits, totalHits } = await fetchPhotos();\n        renderPhoto(hits);\n        addLoadButton(totalHits);\n        }\n    catch (error) {\n        iziToast.error({\n                messageColor: '#FFF',\n                color: '#EF4040',\n                iconUrl: closeIcon,\n                position: 'topRight',\n                message: `${error}`,\n            })\n    } \n    simpleLightbox();\n    refs.form.reset(); \n}\n\n// ----Promise function----\nasync function fetchPhotos() {\n    refs.spanLoader.classList.remove('hidden');\n    const response = await axios.get( 'https://pixabay.com/api/',{\n      params: {\n    key: \"42112521-3ff4dfc201bab0977369cd2bc\",\n    q: `${inputSearch}`,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    per_page: perPage,\n    page: page},\n    });\n    const {hits, totalHits } = response.data;\n    refs.spanLoader.classList.add('hidden');\n    return {hits, totalHits};\n}\n\n// ----Add an event handler for the \"Load more\" button----\nrefs.loadButton.addEventListener('click', async () => {  \n    page++;\n    try {\n        const {hits, totalHits} = await fetchPhotos();\n        renderPhoto(hits);\n        smoothScroll();\n        noMoreLoadingPhotos(page,totalHits);\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n                messageColor: '#FFF',\n                color: '#EF4040',\n                iconUrl: closeIcon,\n                position: 'topRight',\n                message: `${error}`,\n            })\n    };\n    simpleLightbox();\n})\n\n// ----Markup HTML----\nfunction renderPhoto(hits) {\n    const markup = hits\n        .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) =>\n `<li class='gallery-item'>\n  <a class='gallery-link' href='${largeImageURL}'>\n    <img class='gallery-image' src='${webformatURL}' alt='${tags}'/>\n  </a>\n<div class='container-app'>\n<p><span>Likes</span> ${likes}</p>\n<p><span>Views</span> ${views}</p>\n<p><span>Comments</span> ${comments}</p>\n<p><span>Downloads</span> ${downloads}</p>\n</div>\n </li>`)\n        .join('');\n    refs.list.insertAdjacentHTML('beforeend', markup);\n}\n\n// ----smoothScroll----\nfunction smoothScroll() {\n const {height: itemHeight} = document.querySelector('.gallery-item').getBoundingClientRect();\n  window.scrollBy({\n    top: itemHeight*2,\n    behavior: 'smooth',\n  });\n}\n\n// ---- Add 'Load more' button-----\nfunction addLoadButton(totalHits) {\n   const totalPages = Math.ceil(totalHits / perPage);     \n    if (totalPages>1) {\n       refs.loadButton.classList.remove('hidden'); \n    };\n    if (totalHits === 0) {\n        iziToast.error({\n            messageColor: '#FFF',\n            color: '#EF4040',\n            iconUrl: closeIcon,\n            position: 'topRight',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        };  \n}\n\n\n// ---- Check the end of the collection----\nfunction noMoreLoadingPhotos(page, totalHits) {\n    const totalPages = Math.ceil(totalHits / perPage);\n    if (page >totalPages) {\n        refs.loadButton.classList.add('hidden');\n        iziToast.error({\n        position: \"topRight\",\n        messageColor: '#FFF',\n        color: '#EF4040',\n        iconUrl: closeIcon,\n        message: \"We're sorry, but you've reached the end of search results\"\n    });\n  }   \n}\n\n// ----library simpleLightbox----\nfunction simpleLightbox(){\n    let gallery = new SimpleLightbox('.gallery a',{\n    captionsData: 'alt',\n    captionsPosition: 'bottom',\n    captionDelay: 250,\n});\n    gallery.on('show.simpleLightbox');\n    gallery.refresh();\n}\n\n"],"names":["closeIcon","refs","page","inputSearch","perPage","onSearchButton","iziToast","hits","totalHits","fetchPhotos","renderPhoto","addLoadButton","error","simpleLightbox","response","axios","smoothScroll","noMoreLoadingPhotos","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","itemHeight","totalPages","gallery","SimpleLightbox"],"mappings":"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"}